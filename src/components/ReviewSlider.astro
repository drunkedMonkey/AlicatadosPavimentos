---
import { getCollection } from "astro:content";
const allReviews = [
  {
    data: {
      author: "Remedios Martínez",
      review: "Rápido y limpio.",
    },
  },
  {
    data: {
      author: "Iván Galán",
      review: "Profesionales serios y precios",
    },
  },
  {
    data: {
      author: "Samantha Tobarra",
      review:
        "Profesionales de principio a fin. Me asesoraron en todo momento y el resultado ha sido espectacular. La cocina ha quedado preciosa con el nuevo alicatado y el suelo exterior luce como nuevo. Recomendados al 100%",
    },
  },
  {
    data: {
      author: "José Ibañez",
      review: "Muy buen trato y un trabajo impecable",
    },
  },
];
---

<div class="swiper w-full mt-8 bg-white rounded-lg">
  <div class="swiper-wrapper h-auto w-auto pt-8 pb-12">
    {
      allReviews.map((review) => (
        <div class="swiper-slide cursor-pointer select-none">
          <div class="px-4 lg:px-8">
            <blockquote class="border-none">
              <p class="text-center font-medium text-2xl text-balance">
                {review.data.review}
              </p>
              <footer class="text-center mt-4">
                — <cite>{review.data.author}</cite>
              </footer>
            </blockquote>
          </div>
        </div>
      ))
    }
  </div>
  <div class="swiper-pagination"></div>
</div>

<script>
  import Swiper from "swiper";
  import { Pagination, Autoplay } from "swiper/modules";
  import "swiper/css";
  import "swiper/css/pagination";

  document.addEventListener("astro:page-load", () => {
    const swiper = document.querySelector(".swiper") as HTMLElement;
    new Swiper(swiper, {
      modules: [Pagination, Autoplay],
      loop: true,
      slidesPerView: 1,
      spaceBetween: 32,
      autoplay: {
        delay: 2500,
      },
      pagination: {
        el: ".swiper-pagination",
      },
    });
  });
</script>
